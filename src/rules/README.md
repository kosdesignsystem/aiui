# Правила работы с проектом

Эти правила обязательны для дизайнеров и AI-агентов.

## Общие принципы

1. Сначала читайте правила из папки `rules`.
2. Веб-версия в `src/web` — основное место проектирования и правки экранов.
3. Каждое приложение в `flutter` должно быть самостоятельным Flutter-проектом.
4. Все референсы и компоненты копируйте в конкретный Flutter-проект, не используйте импорты
   и ссылки на внешние проекты.
5. Для повторяемых паттернов используйте шаблоны из `templates` как основу, но
   переносите код внутрь нужного Flutter-приложения.

## Структура Flutter-приложений

- `flutter/system` — системные приложения (Launcher, QuickSettings, Keyboard, OpenApps).
- `flutter/user` — пользовательские приложения (Contacts, Phone).
- Внутри каждого приложения создавайте папки версий: `v1`, `v2`, ...
- Каждая версия — отдельный Flutter-проект с `pubspec.yaml` и папкой `lib`.
- Внутри `lib` держите экраны (`screens/`), темы (`theme/`) и компоненты (`widgets/`).

## Работа с версиями

- Никогда не редактируйте старую версию, если требуется новая итерация.
- Создавайте новую папку версии и сохраняйте изменения там.
- В интерфейсе должен быть виден текущий путь: приложение, версия и экран.
- После добавления новой версии обновляйте реестр веб-просмотра в `src/web/registry.ts`.

## Компоненты и стили (Flutter)

- Используйте локальные `theme/tokens.dart` и `theme/typography.dart` внутри каждой версии.
- Базовые компоненты создавайте в `widgets/` внутри конкретного Flutter-приложения.
- Не используйте общие каталоги с компонентами между приложениями — копируйте код.

## Анимации

- Список анимаций хранится в `animate`.
- При добавлении новой анимации обновляйте `animate/README.md`.

## Веб-представление

- Веб-версия находится в `src/web` и используется для активного проектирования.
- Экранные заглушки в вебе должны ссылаться на путь Flutter-проекта, чтобы было понятно,
  где находится исходный код.

## Синхронизация Web → Flutter

- Запрос “синхронизируй проекты web и flutter” означает: перенести все изменения
  экранов из `src/web` в соответствующие Flutter-проекты в `flutter/`.
- Цель синхронизации — идентичный внешний вид между web и Flutter.
- Каждый Flutter-проект должен оставаться полностью обособленным и не импортировать
  код из других приложений.
