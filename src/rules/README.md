# Правила работы с проектом

Эти правила обязательны для дизайнеров и AI-агентов.

## Общие принципы

1. Сначала читайте правила из папки `rules`.
2. Каждое приложение в `apps` должно быть самостоятельным Flutter-проектом.
3. Все референсы и компоненты копируйте в конкретный проект, не используйте импорты
   и ссылки на внешние проекты.
4. Для повторяемых паттернов используйте шаблоны из `templates` как основу, но
   переносите код внутрь нужного Flutter-приложения.
5. Веб-представление остаётся в `src/web` и используется только для просмотра в браузере.

## Структура Flutter-приложений

- `apps/system` — системные приложения (Launcher, QuickSettings, Keyboard, OpenApps).
- `apps/user` — пользовательские приложения (Contacts, Phone).
- Внутри каждого приложения создавайте папки версий: `v1`, `v2`, ...
- Каждая версия — отдельный Flutter-проект с `pubspec.yaml` и папкой `lib`.
- Внутри `lib` держите экраны (`screens/`), темы (`theme/`) и компоненты (`widgets/`).

## Работа с версиями

- Никогда не редактируйте старую версию, если требуется новая итерация.
- Создавайте новую папку версии и сохраняйте изменения там.
- В интерфейсе должен быть виден текущий путь: приложение, версия и экран.
- После добавления новой версии обновляйте реестр веб-просмотра в `src/web/registry.ts`.

## Компоненты и стили (Flutter)

- Используйте локальные `theme/tokens.dart` и `theme/typography.dart` внутри каждой версии.
- Базовые компоненты создавайте в `widgets/` внутри конкретного Flutter-приложения.
- Не используйте общие каталоги с компонентами между приложениями — копируйте код.

## Анимации

- Список анимаций хранится в `animate`.
- При добавлении новой анимации обновляйте `animate/README.md`.

## Веб-представление

- Веб-версия находится в `src/web` и используется только для быстрой проверки в браузере.
- Экранные заглушки в вебе должны ссылаться на путь Flutter-проекта, чтобы было понятно,
  где находится исходный код.
