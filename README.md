# Запросы к AI (README)

Этот документ — маршрутизация запросов. Он определяет, какой порядок действий выполнять.

## Базовый порядок

1. Внести изменения в web (`src/web`).
2. если добавлена версия или новое приложение — обновить `src/web/registry.ts`;

## Маршрутизация запросов

### 1) Явный путь/версия

Признаки: указан путь вида `/app/<AppName>/vN`, `src/web/.../vN`, `app/.../vN`, либо явно названа версия приложения.
Действие: правки только в указанной версии. Новую версию не создавать, если не просили.

### 2) Указано приложение, но без версии

Признаки: "Создай Контакты", "Обнови Launcher", "Добавь экран в Phone".

Действие: Выполнить Базовый порядок. Создать новую версию в существующем приложении (vN+1) и работать в ней. Обновить registry

### 3) Новый контекст / новое приложение

Признаки: приложения нет в `src/web` (например, "Создай Напоминания").
Действие: создать новое приложение и версию `v1` по правилам `rules/new-app.md`. Обновить registry

### 4) Точный запрос на синхронизацию

Признаки: "/Путь/до/приложения. Экспортируй на Flutter".

Действие: выполнить только `rules/sync-web-flutter.md` без изменений в web.
Это выполняется в полном автоматическом режиме:
- не просить пользователя вручную запускать промежуточные команды;
- автоматически создавать недостающие Flutter-платформы для доступных устройств;
- автоматически выполнять `flutter pub get`, форматирование и анализ после синхронизации.

### 5) Добавление компонентов/шаблонов/ассетов/анимаций

Признаки: "Добавь кнопку", "Добавь шаблон свайпа", "Добавь иконку", "Добавь анимацию".
Действие: выполнить `rules/new-asset.md`
